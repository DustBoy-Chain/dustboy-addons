#!/command/with-contenv bashio
# op-reth â€” OP Stack execution layer (Rust Ethereum client)

LOG_LEVEL=$(bashio::config 'log_level')
DATA_DIR="/data"

echo "[op-reth] Starting execution layer"

exec op-reth node \
    --datadir "${DATA_DIR}/reth" \
    --chain "${DATA_DIR}/config/genesis.json" \
    --http \
    --http.corsdomain="*" \
    --http.addr=0.0.0.0 \
    --http.port=9545 \
    --http.api=all \
    --ws \
    --ws.addr=0.0.0.0 \
    --ws.port=9546 \
    --ws.origins="*" \
    --ws.api=all \
    --authrpc.addr=127.0.0.1 \
    --authrpc.port=8551 \
    --authrpc.jwtsecret="${DATA_DIR}/config/jwt.txt" \
    --rpc.eth-proof-window=302400 \
    --port=30301 \
    --log.stdout.filter="${LOG_LEVEL}" \
    --metrics 0.0.0.0:9001
